# 拷贝、赋值、销毁

## 基本概念

一个类，通过定义**五种**特殊的成员函数来控制对此类型**拷贝、移动、赋值和销毁**时做什么。

- 拷贝构造函数
- 拷贝赋值运算符
- 移动构造函数
- 移动赋值运算符
- 析构函数

### 直接初始化与拷贝初始化

1. 直接初始化：

	- 使用圆括号`()`或花括号`{}`直接初始化一个对象。

	- 直接初始化时，编译器会直接调用构造函数（默认构造函数、带参数的构造函数、拷贝构造函数），实际上是要求编译器使用普通的函数匹配，根据我们提供的参数，选择最合适的构造函数。

	- ```c++
		MyClass obj1(10);  // 使用单个参数的构造函数
		MyClass obj2{20};  // 统一初始化（C++11）
		```

2. 拷贝初始化

	- 使用等号`=`进行初始化

	- 首先创建一个临时对象，然后把这个临时对象拷贝到正在创建的对象中

	- 可能会进行类型转换

	- 然后编译器会调用构造函数（默认构造函数、带参数的构造函数、拷贝构造函数等）初始化对象

	- ```c++
		MyClass obj3 = 30;  // 拷贝初始化
		```

	常见的函数传参，不论是传入还是传出参数，只要对象类型不是引用，那么就会执行拷贝初始化。因此，拷贝构造函数的参数类型**必须是引用类型**，否则就是把钥匙锁在了箱子里。

## 拷贝构造函数

### 定义与用途

拷贝构造函数，用于创建一个新对象为现有对象的副本。

当一个对象以值的方式传递给函数，从函数返回，或者用另一个同类型的对象进行初始化时，会调用拷贝构造函数。

### 特点

- 形参：一个同类型对象的引用（常常是常亮引用）。
- 构造新对象：新对象的成员值，从传入拷贝构造函数的对象中复制而来。
- 默认拷贝构造函数：如果没有显式定义拷贝构造函数，编译器会自动生成一个，执行**浅拷贝**。

- 浅拷贝和深拷贝

	- 浅拷贝：简单复制每个成员，对非指针和非动态分配的成员，通常不会引发问题。对于指针类型的成员，浅拷贝只会复制指针的值，而不会复制指针所指向的内存。这意味着两个对象将共享相同的内存地址。	
	- 深拷贝：对于指针类型的成员，深拷贝不仅复制指针的值，还会创建指针所指向数据的一个新的副本。

- ```c++
	class MyClass {
	public:
	    MyClass(const MyClass &other) {
	        // 拷贝构造函数的内容，通常涉及复制other的成员到新对象
	    }
	};
	```

## 拷贝赋值运算符

### 定义与用途

拷贝赋值运算符，用于定义一个对象如何通过“赋值”`=`操作符从一个同类型对象那里复制数据。

当把一个对象赋值给另一个已经存在的对象时，就会调用拷贝赋值运算符。

```c++
class Foo {
public:
	Foo& operator=(const Foo&); //赋值运算符
    
    return *this
}
```

## 析构函数



